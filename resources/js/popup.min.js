(function(e,n,t,o,r){"use strict";function c(n,t,r,c,i,l,a){return o.runtime.sendMessage({action:"checkScriptFreshness",globalMD5:e.GLOBAL}),new s(n,t,r,c,i,l,a)}var i="ConfigController";n.module("powellDevTools").controller(i,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",c]);var s=function(e,n,t,r,c,i,s){var l=document.querySelectorAll("script"),a=l[l.length-1];a.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/master/resources/html/ConfigController.html",e.config={envID:s.get_envID(),themeID:s.get_themeID(),xhrOrigin:s.get_xhrOrigin()},e.enableCssEmulation=s.isEnabled("css"),e.enableXhrEmulation=s.isEnabled("xhr"),e.environments=s.ENVIRONMENTS,e.cdnModes=s.CDNMODES,e.$watchCollection("config",function(n){for(var t in n)s.setLocalStorageValue(t,n[t]);e.emulationSources={css:s.get_cssSourceUrl("*.css")}}),e.isPaneActive=function(e){return e==s.get_activePane()?"active":""},e.setActivePane=function(e){s.set_activePane(e)},e.switchChanged=function(e){var n=t.defer();o.runtime.sendMessage({action:"setEnabled",enabled:!s.isEnabled(e),sourceKind:e},function(e){!e&&o.runtime.lastError?n.reject(o.runtime.lastError):n.resolve(e)}),n.promise.catch(function(e){})},e.clearLocalStorage=function(){o.tabs.query({active:!0,currentWindow:!0},function(e){o.tabs.sendMessage(e[0].id,{method:"powDevTools.clearStorage"},function(n){o.tabs.reload(e[0].id,{bypassCache:!0},function(e){console.log(n,e),o.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell Dev Tools",message:"Local storage, local session and browser cache cleared successfully"})})})})}}})(window,window.angular,window.jQuery,window.chrome);