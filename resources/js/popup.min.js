(function(e,t,n,a,s){"use strict";function o(t,n,s,o,r,i,c){return a.runtime.sendMessage({action:"powDevTools.checkScriptFreshness",globalMD5:e.GLOBAL}),new l(t,n,s,o,r,i,c)}var r="ConfigController";t.module("powellDevTools").controller(r,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",o]);var l=function(e,t,n,s,o,r,l){function i(e){return e.replace(/[ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿŐőŒœŔŕŖŗŘřŚśŜŝŞşŠšŢţŤťŦŧŨũŪūŬŭŮůŰűŲųŴŵŶŷŸŹźŻżŽž]/g,function(e){return'"'===e||"\\"===e?" ":"\\x"+e.charCodeAt(0).toString(16).toUpperCase()})}var c=document.querySelectorAll("script"),u=c[c.length-1];u.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/master/resources/html/ConfigController.html",e.config={repoJsURL:l.get_repoJsURL(),defaultJsRepoState:l.get_defaultJsRepoState(),repoCssURL:l.get_repoCssURL(),defaultCssRepoState:l.get_defaultCssRepoState(),defautCssOnCdnState:l.get_defautCssOnCdnState(),defaultCssURL:l.get_defaultCssURL(),devCssID:l.get_devCssID(),defaultJsTenantState:l.get_defaultJsTenantState(),tenantCssID:l.get_tenantCssID(),defaultCssTenantState:l.get_defaultCssTenantState(),envID:l.get_envID(),themeID:l.get_themeID(),headerID:l.get_headerID(),footerID:l.get_footerID(),useThemeState:l.get_useThemeState(),useHeaderState:l.get_useHeaderState(),useFooterState:l.get_useFooterState(),repoHtmlURL:l.get_repoHtmlURL(),defaultHtmlRepoState:l.get_defaultHtmlRepoState(),htmlVersion:l.get_htmlVersion(),sourceMode:l.get_sourceMode(),cdnJsMode:l.get_cdnJsMode(),cdnCssMode:l.get_cdnCssMode(),cdnHtmlMode:l.get_cdnHtmlMode(),xhrOrigin:l.get_xhrOrigin()},e.enableJsEmulation=l.isEnabled("js"),e.enableCssEmulation=l.isEnabled("css"),e.enableHtmlEmulation=l.isEnabled("html"),e.enableXhrEmulation=l.isEnabled("xhr"),e.environments=l.ENVIRONMENTS,e.sourceModes=l.SOURCEMODES,e.cdnModes=l.CDNMODES,e.$watchCollection("config",function(t){for(var n in t)if(l.setLocalStorageValue(n,t[n]),"headerID"==n||"footerID"==n){var s="powDevTools.valueUpdated",o={name:n,value:t[n]};a.runtime.sendMessage({action:s,data:o})}e.emulationSources={css:l.get_cssSourceUrl("*.css",!1),js:l.get_jsSourceUrl(),html:l.get_htmlSourceUrl("[layouts|templates]/*.html")}}),e.isPaneActive=function(e){return l.get_activePane().match(new RegExp(e))?"active":""},e.setActivePane=function(e){l.set_activePane(e)},e.switchChanged=function(e){var t=n.defer();a.runtime.sendMessage({action:"powDevTools.setEnabled",enabled:!l.isEnabled(e),sourceKind:e},function(e){!e&&a.runtime.lastError?t.reject(a.runtime.lastError):t.resolve(e)}),t.promise.catch(function(e){})},e.clearLocalStorage=function(e){var t=e?"powDevTools.clearSearchStorage":"powDevTools.clearStorage";a.tabs.query({active:!0,currentWindow:!0},function(e){a.tabs.sendMessage(e[0].id,{method:t},function(t){a.tabs.reload(e[0].id,{bypassCache:!0},function(e){a.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell Dev Tools",message:"Local storage, local session and browser cache cleared successfully"})})})})},e.Sp={Res:{Name:"",Key:"",resourceValues:"",getResourceValuesIndicator:"",btnGetResourceValues:"Get resources",getResourceValues:function(){var t=0,n=r(function(){t++,e.Sp.Res.getResourceValuesIndicator=".".repeat(t%3+1)},500),s="powDevTools.getResourceValues",o={name:e.Sp.Res.Name,key:e.Sp.Res.Key};a.tabs.query({active:!0,currentWindow:!0},function(t){a.tabs.sendMessage(t[0].id,{method:s,data:o},function(t){r.cancel(n),e.Sp.Res.getResourceValuesIndicator="",e.Sp.Res.resourceValues=t})})}}};var g={fr:"1036",en:"1033",it:"1040",es:"3082",cs:"1029",de:"1031",nl:"1043",pl:"1045",pt:"1046",pt:"2070",ru:"1049",sv:"1053",tr:"1055","zh-CHS":"2052"};e.Bing={bingSource:"",bingDestination:"",bingTranslatingIndicator:"",btnTranslateTitle:"Traduire",translateBing:function(){e.Bing.btnTranslateTitle="Traduction";var t=0,n=r(function(){t++,e.Bing.bingTranslatingIndicator=".".repeat(t%3+1)},500),a={Input:e.Bing.bingSourcePhrase,Languages:Object.keys(g)},s=l.get_bingTranslationResource();s.post(a,function(t){r.cancel(n),e.Bing.bingTranslatingIndicator="",e.Bing.btnTranslateTitle="Traduire";var a={key:e.Bing.bingSourceKey};Object.keys(t.Data).forEach(function(e){a["_"+g[e]]=t.Data[e]}),a=i(JSON.stringify(a,null,1)),a=a.replace(/"(key|_\d+)"/g,"$1").replace(/\'/g,"\\'").replace(/(: )?"(,)?/g,"$1'$2"),e.Bing.bingDestination=a})}}}})(window,window.angular,window.jQuery,window.chrome);