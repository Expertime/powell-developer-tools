(function(e,n,t,o,r){"use strict";function i(n,t,r,i,c,s,a){return o.runtime.sendMessage({action:"checkScriptFreshness",globalMD5:e.GLOBAL}),new l(n,t,r,i,c,s,a)}var c="ConfigController";n.module("powellDevTools").controller(c,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",i]);var l=function(e,n,t,r,i,c,l){var s=document.querySelectorAll("script"),a=s[s.length-1];a.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/Powell-365-branding/resources/html/ConfigController.html",e.config={envID:l.get_envID(),themeID:l.get_themeID(),xhrOrigin:l.get_xhrOrigin()},e.enableCssEmulation=l.isEnabled("css"),e.enableXhrEmulation=l.isEnabled("xhr"),e.environments=l.ENVIRONMENTS,e.cdnModes=l.CDNMODES,e.$watchCollection("config",function(n){for(var t in n)l.setLocalStorageValue(t,n[t]);e.emulationSources={css:l.get_cssSourceUrl("*.css")}}),e.isPaneActive=function(e){return e==l.get_activePane()?"active":""},e.setActivePane=function(e){l.set_activePane(e)},e.switchChanged=function(e){var n=t.defer();o.runtime.sendMessage({action:"setEnabled",enabled:!l.isEnabled(e),sourceKind:e},function(e){!e&&o.runtime.lastError?n.reject(o.runtime.lastError):n.resolve(e)}),n.promise.catch(function(e){})},e.clearLocalStorage=function(){o.tabs.query({active:!0,currentWindow:!0},function(e){o.tabs.sendMessage(e[0].id,{method:"powDevTools.clearStorage"},function(n){o.tabs.reload(e[0].id,{bypassCache:!0},function(e){console.log(n,e),o.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell 365 Branding",message:"Browser cache cleared successfully"})})})})}}})(window,window.angular,window.jQuery,window.chrome);