(function(e,t,s,n,o){"use strict";function a(t,s,o,a,l,c,i){return n.runtime.sendMessage({action:"checkScriptFreshness",globalMD5:e.GLOBAL}),new r(t,s,o,a,l,c,i)}var l="ConfigController";t.module("powellDevTools").controller(l,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",a]);var r=function(e,t,s,o,a,l,r){var c=document.querySelectorAll("script"),i=c[c.length-1];i.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/master/resources/html/ConfigController.html",e.config={repoJsURL:r.get_repoJsURL(),defaultJsRepoState:r.get_defaultJsRepoState(),repoCssURL:r.get_repoCssURL(),defaultCssRepoState:r.get_defaultCssRepoState(),defautCssOnCdnState:r.get_defautCssOnCdnState(),defaultCssURL:r.get_defaultCssURL(),devCssID:r.get_devCssID(),defaultJsTenantState:r.get_defaultJsTenantState(),tenantCssID:r.get_tenantCssID(),defaultCssTenantState:r.get_defaultCssTenantState(),envID:r.get_envID(),themeID:r.get_themeID(),useThemeState:r.get_useThemeState(),repoHtmlURL:r.get_repoHtmlURL(),defaultHtmlRepoState:r.get_defaultHtmlRepoState(),htmlVersion:r.get_htmlVersion(),sourceMode:r.get_sourceMode(),cdnJsMode:r.get_cdnJsMode(),cdnCssMode:r.get_cdnCssMode(),cdnHtmlMode:r.get_cdnHtmlMode(),xhrOrigin:r.get_xhrOrigin()},e.enableJsEmulation=r.isEnabled("js"),e.enableCssEmulation=r.isEnabled("css"),e.enableHtmlEmulation=r.isEnabled("html"),e.enableXhrEmulation=r.isEnabled("xhr"),e.environments=r.ENVIRONMENTS,e.sourceModes=r.SOURCEMODES,e.cdnModes=r.CDNMODES,e.$watchCollection("config",function(t){for(var s in t)r.setLocalStorageValue(s,t[s]);e.emulationSources={css:r.get_cssSourceUrl("*.css",!1),js:r.get_jsSourceUrl(),html:r.get_htmlSourceUrl("[layouts|templates]/*.html")}}),e.isPaneActive=function(e){return e==r.get_activePane()?"active":""},e.setActivePane=function(e){r.set_activePane(e)},e.switchChanged=function(e){var t=s.defer();n.runtime.sendMessage({action:"setEnabled",enabled:!r.isEnabled(e),sourceKind:e},function(e){!e&&n.runtime.lastError?t.reject(n.runtime.lastError):t.resolve(e)}),t.promise.catch(function(e){})},e.clearLocalStorage=function(){n.tabs.query({active:!0,currentWindow:!0},function(e){n.tabs.sendMessage(e[0].id,{method:"powDevTools.clearStorage"},function(t){n.tabs.reload(e[0].id,{bypassCache:!0},function(e){console.log(t,e),n.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell Dev Tools",message:"Local storage, local session and browser cache cleared successfully"})})})})}}})(window,window.angular,window.jQuery,window.chrome);