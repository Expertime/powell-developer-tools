(function(e,n,o,t,r){"use strict";function i(n,o,r,i,c,l,a){return t.runtime.sendMessage({action:"checkScriptFreshness",globalMD5:e.GLOBAL}),new s(n,o,r,i,c,l,a)}var c="ConfigController";n.module("powellDevTools").controller(c,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",i]);var s=function(e,n,o,r,i,c,s){var l=document.querySelectorAll("script"),a=l[l.length-1];a.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/Powell-365-branding/resources/html/ConfigController.html",e.config={envID:s.get_envID(),themeID:s.get_themeID(),xhrOrigin:s.get_xhrOrigin()},e.enableCssEmulation=s.isEnabled("css"),e.enableXhrEmulation=s.isEnabled("xhr"),e.environments=s.ENVIRONMENTS,e.cdnModes=s.CDNMODES,e.$watchCollection("config",function(n){for(var o in n)s.setLocalStorageValue(o,n[o]);e.emulationSources={css:s.get_cssSourceUrl("*.css")}}),e.isPaneActive=function(e){return e==s.get_activePane()?"active":""},e.setActivePane=function(e){s.set_activePane(e)},e.switchChanged=function(e){var n=o.defer();t.runtime.sendMessage({action:"setEnabled",enabled:!s.isEnabled(e),sourceKind:e},function(e){!e&&t.runtime.lastError?n.reject(t.runtime.lastError):n.resolve(e)}),n.promise.catch(function(e){})},e.clearLocalStorage=function(){t.tabs.query({active:!0,currentWindow:!0},function(e){t.tabs.sendMessage(e[0].id,{method:"powDevTools.clearStorage"},function(n){t.tabs.reload(e[0].id,{bypassCache:!0},function(e){console.log(n,e),t.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell Dev Tools",message:"Local storage, local session and browser cache cleared successfully"})})})})}}})(window,window.angular,window.jQuery,window.chrome);