(function(e,t,o,s,n){"use strict";function a(t,o,n,a,r,c,i){return s.runtime.sendMessage({action:"powDevTools.checkScriptFreshness",globalMD5:e.GLOBAL}),new l(t,o,n,a,r,c,i)}var r="ConfigController";t.module("powellDevTools").controller(r,["$scope","$element","$q","$sce","$timeout","$interval","datacontextUtility",a]);var l=function(e,t,o,n,a,r,l){var c=document.querySelectorAll("script"),i=c[c.length-1];i.src.indexOf("chrome-extension://")>=0?e.configTemplateUrl="/resources/html/ConfigController.html":e.configTemplateUrl="https://rawgit.com/Expertime/powell-developer-tools/master/resources/html/ConfigController.html",e.config={repoJsURL:l.get_repoJsURL(),defaultJsRepoState:l.get_defaultJsRepoState(),repoCssURL:l.get_repoCssURL(),defaultCssRepoState:l.get_defaultCssRepoState(),defautCssOnCdnState:l.get_defautCssOnCdnState(),defaultCssURL:l.get_defaultCssURL(),devCssID:l.get_devCssID(),defaultJsTenantState:l.get_defaultJsTenantState(),tenantCssID:l.get_tenantCssID(),defaultCssTenantState:l.get_defaultCssTenantState(),envID:l.get_envID(),themeID:l.get_themeID(),headerID:l.get_headerID(),footerID:l.get_footerID(),useThemeState:l.get_useThemeState(),useHeaderState:l.get_useHeaderState(),useFooterState:l.get_useFooterState(),repoHtmlURL:l.get_repoHtmlURL(),defaultHtmlRepoState:l.get_defaultHtmlRepoState(),htmlVersion:l.get_htmlVersion(),sourceMode:l.get_sourceMode(),cdnJsMode:l.get_cdnJsMode(),cdnCssMode:l.get_cdnCssMode(),cdnHtmlMode:l.get_cdnHtmlMode(),xhrOrigin:l.get_xhrOrigin()},e.enableJsEmulation=l.isEnabled("js"),e.enableCssEmulation=l.isEnabled("css"),e.enableHtmlEmulation=l.isEnabled("html"),e.enableXhrEmulation=l.isEnabled("xhr"),e.environments=l.ENVIRONMENTS,e.sourceModes=l.SOURCEMODES,e.cdnModes=l.CDNMODES,e.$watchCollection("config",function(t){for(var o in t)if(l.setLocalStorageValue(o,t[o]),"headerID"==o||"footerID"==o){var n="powDevTools.valueUpdated",a={name:o,value:t[o]};s.runtime.sendMessage({action:n,data:a})}e.emulationSources={css:l.get_cssSourceUrl("*.css",!1),js:l.get_jsSourceUrl(),html:l.get_htmlSourceUrl("[layouts|templates]/*.html")}}),e.isPaneActive=function(e){return e==l.get_activePane()?"active":""},e.setActivePane=function(e){l.set_activePane(e)},e.switchChanged=function(e){var t=o.defer();s.runtime.sendMessage({action:"powDevTools.setEnabled",enabled:!l.isEnabled(e),sourceKind:e},function(e){!e&&s.runtime.lastError?t.reject(s.runtime.lastError):t.resolve(e)}),t.promise.catch(function(e){})},e.clearLocalStorage=function(e){var t=e?"powDevTools.clearSearchStorage":"powDevTools.clearStorage";s.tabs.query({active:!0,currentWindow:!0},function(e){s.tabs.sendMessage(e[0].id,{method:t},function(t){s.tabs.reload(e[0].id,{bypassCache:!0},function(e){s.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell Dev Tools",message:"Local storage, local session and browser cache cleared successfully"})})})})}}})(window,window.angular,window.jQuery,window.chrome);