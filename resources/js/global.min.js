!function PDT_GLOBAL(window,angular,localStorage,undefined){"use strict";var powellDevTools=angular.module("powellDevTools",["ngSanitize","ngResource"]).config(["$sceDelegateProvider",function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","https://cdn.jsdelivr.net/**"])}]),SERVICE_ID="datacontextUtility";function datacontextUtilityFactory($q,$resource){return new DatacontextUtility($q,$resource)}angular.module("powellDevTools").factory(SERVICE_ID,["$q","$resource",datacontextUtilityFactory]);var DatacontextUtility=function($q,$resource){var _this=this;DatacontextUtility.$q=$q,DatacontextUtility.$resource=$resource,this.CDN_BASE_URL="https://[CDNMODE][CDNPREMMODE]",this.DEFAULT_TENANT="Default",this.ENVIRONMENTS={PROD:"1",REC:"2",DEV:"3"},this.SOURCEMODES={PROD:"",DEBUG:"/debug"},this.CDNMODES={PROD:"",REC:"r7-"},this.CDNPREMMODE={BASIC:"cdn.powell-365.com",PREM:"powell365-cdn.azureedge.net"},this.ENABLEDSTATES=["js","css","cdn","html","xhr"]},_getLocalStorageValue=function(key){return localStorage["PowellDevTools_"+key]},_setLocalStorageValue=function(key,value){localStorage["PowellDevTools_"+key]=value};DatacontextUtility.prototype.get_repoJsURL=function(){return _getLocalStorageValue("repoJsURL")||""},DatacontextUtility.prototype.set_repoJsURL=function(url){_setLocalStorageValue("repoJsURL",url)},DatacontextUtility.prototype.get_defaultJsRepoState=function(){return"true"===_getLocalStorageValue("defaultJsRepoState")},DatacontextUtility.prototype.set_defaultJsRepoState=function(useDefault){_setLocalStorageValue("defaultJsRepoState",useDefault)},DatacontextUtility.prototype.get_defaultLocalJsRepoState=function(){return"true"===_getLocalStorageValue("defaultLocalJsRepoState")},DatacontextUtility.prototype.set_defaultLocalJsRepoState=function(useDefault){_setLocalStorageValue("defaultLocalJsRepoState",useDefault)},DatacontextUtility.prototype.get_defaultJsTenantState=function(){return"true"===_getLocalStorageValue("defaultJsTenantState")},DatacontextUtility.prototype.set_defaultJsTenantState=function(useDefault){_setLocalStorageValue("defaultJsTenantState",useDefault)},DatacontextUtility.prototype.get_sourceMode=function(){return _getLocalStorageValue("sourceMode")||""},DatacontextUtility.prototype.set_sourceMode=function(id){_setLocalStorageValue("sourceMode",id)},DatacontextUtility.prototype.get_cdnJsMode=function(){return _getLocalStorageValue("cdnJsMode")||""},DatacontextUtility.prototype.set_cdnJsMode=function(id){_setLocalStorageValue("cdnJsMode",id)},DatacontextUtility.prototype.get_repoCssURL=function(){return _getLocalStorageValue("repoCssURL")||""},DatacontextUtility.prototype.set_repoCssURL=function(url){_setLocalStorageValue("repoCssURL",url)},DatacontextUtility.prototype.get_defaultCssRepoState=function(){return"true"===_getLocalStorageValue("defaultCssRepoState")},DatacontextUtility.prototype.set_defaultCssRepoState=function(useDefault){_setLocalStorageValue("defaultCssRepoState",useDefault)},DatacontextUtility.prototype.get_defautCssOnCdnState=function(){return"true"===_getLocalStorageValue("defautCssOnCdnState")},DatacontextUtility.prototype.set_defautCssOnCdnState=function(defaultCssOnCdn){_setLocalStorageValue("defautCssOnCdnState",defaultCssOnCdn)},DatacontextUtility.prototype.get_defaultCssURL=function(){return _getLocalStorageValue("defaultCssURL")||""},DatacontextUtility.prototype.set_defaultCssURL=function(url){_setLocalStorageValue("defaultCssURL",url)},DatacontextUtility.prototype.get_devCssID=function(){return _getLocalStorageValue("devCssID")||""},DatacontextUtility.prototype.set_devCssID=function(id){_setLocalStorageValue("devCssID",id)},DatacontextUtility.prototype.get_tenantCssID=function(){return _getLocalStorageValue("tenantCssID")||""},DatacontextUtility.prototype.set_tenantCssID=function(id){_setLocalStorageValue("tenantCssID",id)},DatacontextUtility.prototype.get_defaultCssTenantState=function(){return"true"===_getLocalStorageValue("defaultCssTenantState")},DatacontextUtility.prototype.set_defaultCssTenantState=function(useDefault){_setLocalStorageValue("defaultCssTenantState",useDefault)},DatacontextUtility.prototype.get_envID=function(){return _getLocalStorageValue("envID")||""},DatacontextUtility.prototype.set_envID=function(id){_setLocalStorageValue("envID",id)},DatacontextUtility.prototype.get_themeID=function(){return parseInt(_getLocalStorageValue("themeID"),10)||0},DatacontextUtility.prototype.set_themeID=function(id){_setLocalStorageValue("themeID",id)},DatacontextUtility.prototype.get_headerID=function(){return parseInt(_getLocalStorageValue("headerID"),10)||0},DatacontextUtility.prototype.set_headerID=function(id){_setLocalStorageValue("headerID",id)},DatacontextUtility.prototype.get_footerID=function(){return parseInt(_getLocalStorageValue("footerID"),10)||0},DatacontextUtility.prototype.set_footerID=function(id){_setLocalStorageValue("footerID",id)},DatacontextUtility.prototype.get_cdnCssMode=function(){return _getLocalStorageValue("cdnCssMode")||""},DatacontextUtility.prototype.set_cdnCssMode=function(id){_setLocalStorageValue("cdnCssMode",id)},DatacontextUtility.prototype.get_useThemeState=function(){return"true"===_getLocalStorageValue("useThemeState")},DatacontextUtility.prototype.set_useThemeState=function(useTheme){_setLocalStorageValue("useThemeState",useTheme)},DatacontextUtility.prototype.get_useHeaderState=function(){return"true"===_getLocalStorageValue("useHeaderState")},DatacontextUtility.prototype.set_useHeaderState=function(useHeader){_setLocalStorageValue("useHeaderState",useHeader)},DatacontextUtility.prototype.get_useFooterState=function(){return"true"===_getLocalStorageValue("useFooterState")},DatacontextUtility.prototype.set_useFooterState=function(useFooter){_setLocalStorageValue("useFooterState",useFooter)},DatacontextUtility.prototype.get_cdnURL=function(){return _getLocalStorageValue("cdnURL")||""},DatacontextUtility.prototype.set_cdnURL=function(url){_setLocalStorageValue("cdnURL",url)},DatacontextUtility.prototype.get_cdnState=function(){return _getLocalStorageValue("cdnState")||"customCdnURL"},DatacontextUtility.prototype.set_cdnState=function(useDefault){_setLocalStorageValue("cdnState",useDefault)},DatacontextUtility.prototype.get_repoHtmlURL=function(){return _getLocalStorageValue("repoHtmlURL")||""},DatacontextUtility.prototype.set_repoHtmlURL=function(url){_setLocalStorageValue("repoHtmlURL",url)},DatacontextUtility.prototype.get_defaultHtmlRepoState=function(){return"true"===_getLocalStorageValue("defaultHtmlRepoState")},DatacontextUtility.prototype.set_defaultHtmlRepoState=function(useDefault){_setLocalStorageValue("defaultHtmlRepoState",useDefault)},DatacontextUtility.prototype.get_htmlVersion=function(){return parseInt(_getLocalStorageValue("htmlVersion"),10)||0},DatacontextUtility.prototype.set_htmlVersion=function(id){_setLocalStorageValue("htmlVersion",id)},DatacontextUtility.prototype.get_cdnHtmlMode=function(){return _getLocalStorageValue("cdnHtmlMode")||""},DatacontextUtility.prototype.set_cdnHtmlMode=function(id){_setLocalStorageValue("cdnHtmlMode",id)},DatacontextUtility.prototype.get_htmlTemplates=function(){return JSON.parse(_getLocalStorageValue("htmlTemplate")||"{}")},DatacontextUtility.prototype.get_htmlTemplate=function(fileName){var htmlTemplates=JSON.parse(_getLocalStorageValue("htmlTemplate")||"{}");return null==htmlTemplates[fileName]&&(htmlTemplates[fileName]={isOverriden:!1,fileName:fileName},_setLocalStorageValue("htmlTemplate",JSON.stringify(htmlTemplates))),htmlTemplates[fileName]},DatacontextUtility.prototype.set_htmlTemplate=function(fileName,isOverriden){var htmlTemplates=JSON.parse(_getLocalStorageValue("htmlTemplate")||"{}");null==htmlTemplates[fileName]?htmlTemplates[fileName]={isOverriden:isOverriden,fileName:fileName}:htmlTemplates[fileName].isOverriden=isOverriden,_setLocalStorageValue("htmlTemplate",JSON.stringify(htmlTemplates))},DatacontextUtility.prototype.get_xhrOrigin=function(){return _getLocalStorageValue("xhrOrigin")||""},DatacontextUtility.prototype.set_xhrOrigin=function(xhrOrigin){_setLocalStorageValue("xhrOrigin",xhrOrigin)},DatacontextUtility.prototype.get_encodeBingTranslation=function(){return"true"===_getLocalStorageValue("encodeBingTranslation")},DatacontextUtility.prototype.set_encodeBingTranslation=function(useDefault){_setLocalStorageValue("encodeBingTranslation",useDefault)},DatacontextUtility.prototype.isEnabled=function(sourceKind){return"true"===_getLocalStorageValue(sourceKind+"_enabled")},DatacontextUtility.prototype.set_isEnabled=function(sourceKind,enabled){_setLocalStorageValue(sourceKind+"_enabled",enabled)},DatacontextUtility.prototype.shouldShowEnabled=function(){var _this=this;return this.isEnabled("js")||this.isEnabled("css")||this.isEnabled("xhr")},DatacontextUtility.prototype.enabledState=function(){var _this=this,enabledState=_this.ENABLEDSTATES.map(function(state){return{kind:state,enabled:_this.isEnabled(state)}});return 0==(enabledState=enabledState.filter(function(state){return state.enabled})).length?"none":1==enabledState.length?enabledState[0].kind:enabledState.map(function(state){return state.kind.substr(0,1)}).join("")},DatacontextUtility.prototype.get_activePane=function(){return _getLocalStorageValue("activePane")||"js"},DatacontextUtility.prototype.set_activePane=function(paneId){_setLocalStorageValue("activePane",paneId)},DatacontextUtility.prototype.getLocalStorageValue=function(key){var _this=this;return this["get_"+key]()},DatacontextUtility.prototype.setLocalStorageValue=function(key,value){var _this=this;this["set_"+key](value)},DatacontextUtility.prototype.get_cdnPremMode=function(isPremium){var _this=this;return this.CDNPREMMODE[isPremium?"PREM":"BASIC"]},DatacontextUtility.prototype.get_jsSourceUrl=function(isPremium){var _this=this,debugJsUrl=[];return this.get_defaultJsRepoState()?(debugJsUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]",this.get_cdnJsMode()).replace("[CDNPREMMODE]",this.get_cdnPremMode(!1))),debugJsUrl.push("scripts"),debugJsUrl.push("powell"+this.get_sourceMode()),debugJsUrl=debugJsUrl.join("/")):debugJsUrl=this.get_defaultLocalJsRepoState()?"https://localhost:55555/javascripts/powell.js":this.get_repoJsURL(),debugJsUrl.replace(/([^:]\/)\/+/g,"$1")},DatacontextUtility.prototype.get_cdnSourceUrl=function(path){var _this=this,cdnUrl=[];switch(this.get_cdnState()){case"customCdnURL":cdnUrl.push(this.get_cdnURL());break;case"defaultLocalCdnURL":cdnUrl.push("https://localhost:44300");break;case"classicCdnURL":cdnUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]","").replace("[CDNPREMMODE]",this.get_cdnPremMode(!1)));break;case"premiumCdnURL":cdnUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]","").replace("[CDNPREMMODE]",this.get_cdnPremMode(!0)))}return cdnUrl.push(path),(cdnUrl=cdnUrl.join("/")).replace(/([^:]\/)\/+/g,"$1")},DatacontextUtility.prototype.get_cssSourceUrl=function(cssFileName,isPremium){var _this=this,debugCssUrl=[];this.get_defaultCssRepoState()?debugCssUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]",this.get_cdnCssMode()).replace("[CDNPREMMODE]",this.get_cdnPremMode(!1))):debugCssUrl.push(this.get_repoCssURL()),debugCssUrl.push("styles"),this.get_defaultCssTenantState()?debugCssUrl.push(this.DEFAULT_TENANT):debugCssUrl.push(this.get_tenantCssID());var userUrl=this.get_devCssID();userUrl&&(debugCssUrl.push("user"),debugCssUrl.push(userUrl)),debugCssUrl.push(cssFileName),debugCssUrl=debugCssUrl.join("/");var envID=this.get_envID(),useTheme=this.get_useThemeState(),useHeader=this.get_useHeaderState(),useFooter=this.get_useFooterState();return envID&&(debugCssUrl+="?env="+this.get_envID(),useTheme&&(debugCssUrl+="&themeId="+this.get_themeID()),useHeader&&(debugCssUrl+="&headerId="+this.get_headerID()),useFooter&&(debugCssUrl+="&footerId="+this.get_footerID())),debugCssUrl.replace(/([^:]\/)\/+/g,"$1")},DatacontextUtility.prototype.get_headerFooterHtmlTemplateUrl=function(originalHtmlTemplateUrl,isHeaderRequest){var _this=this,useHeader=this.get_useHeaderState(),useFooter=this.get_useFooterState(),regHtmlTemplateId=/htmltemplates\/\d+$/i,htmlTemplateId=originalHtmlTemplateUrl.match(regHtmlTemplateId)[0],cdnUrl=originalHtmlTemplateUrl.match(/.*cdn.powell-365.com/)[0];return(useHeader||useFooter)&&(originalHtmlTemplateUrl=originalHtmlTemplateUrl.replace(cdnUrl,this.CDN_BASE_URL.replace("[CDNMODE]",this.get_cdnCssMode()).replace("[CDNPREMMODE]",this.get_cdnPremMode(!1)))),useHeader&&isHeaderRequest&&(originalHtmlTemplateUrl=originalHtmlTemplateUrl.replace(htmlTemplateId,"SergeTemplates/"+this.get_headerID())),useFooter&&!isHeaderRequest&&(originalHtmlTemplateUrl=originalHtmlTemplateUrl.replace(htmlTemplateId,"SergeTemplates/"+this.get_footerID())),originalHtmlTemplateUrl},DatacontextUtility.prototype.get_htmlSourceUrl=function(htmlFileName,htmlFileType){var _this=this,debugHtmlUrl=[];return this.get_defaultHtmlRepoState()?(debugHtmlUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]",this.get_cdnHtmlMode())),debugHtmlUrl.push("Common")):debugHtmlUrl.push(this.get_repoHtmlURL()),debugHtmlUrl.push(htmlFileName),(debugHtmlUrl=debugHtmlUrl.join("/")).replace(/([^:]\/)\/+/g,"$1")},DatacontextUtility.prototype.get_logoSourceUrl=function(logoFileName,isPremium){var _this=this,debugLogoUrl=[];this.get_defaultCssRepoState()?debugLogoUrl.push(this.CDN_BASE_URL.replace("[CDNMODE]",this.get_cdnCssMode()).replace("[CDNPREMMODE]",this.get_cdnPremMode(!1))):debugLogoUrl.push(this.get_repoCssURL()),debugLogoUrl.push("styles"),debugLogoUrl.push(this.DEFAULT_TENANT),debugLogoUrl.push("images"),debugLogoUrl.push(logoFileName),debugLogoUrl=debugLogoUrl.join("/");var envID=this.get_envID(),useTheme=this.get_useThemeState();return envID&&(debugLogoUrl+="?env="+this.get_envID(),useTheme&&(debugLogoUrl+="&themeId="+this.get_themeID())),debugLogoUrl.replace(/([^:]\/)\/+/g,"$1")},DatacontextUtility.prototype.get_bingTranslationResource=function(){return DatacontextUtility.$resource("https://r7-cdn.powell-365.com/translate",{},{post:{method:"POST",params:{},headers:{Accept:"application/json;odata=verbose","content-type":"application/json;odata=verbose","X-Powell-Phone":1081}}})};var _hashCodeFor=function(string){var hash=0,i,chr,len;if(0===string.length)return hash;for(i=0,len=string.length;i<len;i++)hash=(hash<<5)-hash+(chr=string.charCodeAt(i)),hash|=0;return hash};window.PDT_GLOBAL=_hashCodeFor(PDT_GLOBAL.toString())}(window,window.angular,window.localStorage);