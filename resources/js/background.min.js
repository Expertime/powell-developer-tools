(function(e,o,n,t,l){"use strict";function r(e,o){return new p(e,o)}var c="datacontextConfig";o.module("powellDevTools").factory(c,["$q","datacontextUtility",r]);var i=function(e){var o=e.url,n=e.url,t=/powell365-cdn.azureedge.net/i,l=/[^\/\\&\?]+\.\w{3,4}(?=([\?&].*$|$))/,r=/(?:cdn.powell-365.com|powell365-cdn.azureedge.net)\/styles\//i;if(r){if(r.exec&&null!==r.exec(o)||o.indexOf(r)>=0){var c=null!=t.exec(o),i=o.match(l)[0];n=p.utility.get_cssSourceUrl(i,c),console.log("Redirecting original request ["+o+"] to ["+n+"]")}return{redirectUrl:n}}},s=function(e){var o=e.url,n=e.url,t=/(?:cdn.powell-365.com|powell365-cdn.azureedge.net)\/styles.*\/logo-my-portal\.png/i,l=/powell365-cdn.azureedge.net/i,r="logo-my-portal.png";if(null!==t.exec(o)){var c=null!=l.exec(o);n=p.utility.get_logoSourceUrl(r,c),console.log("Redirecting original request ["+o+"] to ["+n+"]")}return{redirectUrl:n}},u=function(e,o){for(var n=[],t=0;t<e.length;t++)for(var l=0;l<o.length;l++)n.push(e[t]+o[l]);return n},a=function(e,o){if(e){var t=["*://r7-cdn.powell-365.com/","*://cdn.powell-365.com/","*://r7-powell365-cdn.azureedge.net/","*://powell365-cdn.azureedge.net/"],l=["styles/Premium/*/*/*/images/logo-my-portal.png"],r=["styles/Premium/*/*/*/powell.css"],c="*://*/*",a={},d=["blocking"];switch(o){case"css":a.types=["image"],a.urls=u(t,l),n.webRequest.onBeforeRequest.addListener(s,a,d),a.types=["stylesheet"],a.urls=u(t,r),a.urls.push(c),n.webRequest.onBeforeRequest.addListener(i,a,d)}}else switch(o){case"css":n.webRequest.onBeforeRequest.removeListener(i),n.webRequest.onBeforeRequest.removeListener(s)}p.utility.set_isEnabled(o,e),g()},d=function(o){o!=e.GLOBAL&&n.runtime.reload()},g=function(){var e=p.utility.enabledFourState(),o=(p.icons[e]||p.icons.all).color,t=p.icons[e]&&p.icons[e].text||e,l=(p.icons[e]||p.icons.all).icon;n.browserAction.setBadgeBackgroundColor({color:o}),n.browserAction.setBadgeText({text:t}),n.browserAction.setIcon({path:l})},w=function(e,o,n){return"setEnabled"==e.action&&a(e.enabled,e.sourceKind),"checkScriptFreshness"==e.action&&d(e.globalMD5),!0},p=function(e,o){p.$q=e,p.utility=o,p.icons={js:{color:"#EFBE19",text:"js",icon:"resources/img/icon19.png"},css:{color:"#2FA9DA",text:"css",icon:"resources/img/icon19.png"},html:{color:"#cd62f3",text:"html",icon:"resources/img/icon19.png"},xhr:{color:"#2af32d",text:"xhr",icon:"resources/img/icon19.png"},all:{color:"#F3672A",text:"all",icon:"resources/img/icon19.png"},none:{color:"#000",text:"none",icon:"resources/img/icon19_disabled.png"}}},m=function(){t.PowellDevTools_js_enabled=!1,t.PowellDevTools_css_enabled=!1,t.PowellDevTools_xhr_enabled=!1,t.PowellDevTools_html_enabled=!1,n.browserAction.setBadgeText({text:""}),n.runtime.onMessage.addListener(w),g()};o.module("powellDevTools").run(["datacontextConfig",m]),n.notifications.create(null,{type:"basic",iconUrl:"resources/img/icon128.png",title:"Powell 365 branding",message:"Plugin reloaded."})})(window,window.angular,window.chrome,window.localStorage);